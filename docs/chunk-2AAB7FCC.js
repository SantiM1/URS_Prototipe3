import{b as ct,c as mt,d as dt}from"./chunk-5X7GK2KA.js";import{a as D,b as We}from"./chunk-3EQ35R3K.js";import{a as qe,b as Ge,c as Ue,e as He}from"./chunk-TKDCUUHE.js";import{a as L,b as je,c as ze}from"./chunk-7HG4JEJQ.js";import{c as Qe}from"./chunk-AJHDA33D.js";import{c as st}from"./chunk-E2KUMYPZ.js";import{a as xe}from"./chunk-JG2SQQ7U.js";import{a as Ae,b as Ne}from"./chunk-WDPTQNZ7.js";import"./chunk-DSM6MMKV.js";import"./chunk-WJBINPGC.js";import{a as Ce,b as be}from"./chunk-E4LHMMAG.js";import"./chunk-YCUPTL4E.js";import"./chunk-KNWMQCEV.js";import"./chunk-DJ6U3CR5.js";import"./chunk-WSYD3MQ4.js";import"./chunk-SVDFLEDS.js";import{b as Re}from"./chunk-2EQGCBQH.js";import{a as $e}from"./chunk-XTSDYVD3.js";import"./chunk-EVOFR55X.js";import{d as Ve,e as Be}from"./chunk-TG5MFZGV.js";import{a as pe,d as ue,i as fe,j as _e}from"./chunk-ALUJXGDR.js";import"./chunk-PPBJAGE4.js";import{b as ye,f as Fe,g as we,h as Ee,j as Ie,l as Me,n as ke,o as Pe,r as Oe,v as Te,w as Le,x as De}from"./chunk-I5HVJAQM.js";import{a as he,e as ge}from"./chunk-PDN63WDF.js";import{b as U,c as ve}from"./chunk-ALNACMX2.js";import{F as me,O as de}from"./chunk-TEVK5W77.js";import"./chunk-3KSSSXKG.js";import{a as Se}from"./chunk-HILZ2HD3.js";import"./chunk-B4J42JTZ.js";import{b as q,c as at,d as G,k as lt}from"./chunk-GZTXKECA.js";import{c as ce}from"./chunk-JCRYDSVT.js";import{k as Q,m as ot,p as le,q as se,z as rt}from"./chunk-5NA7XKUG.js";import{B as J,C as K,Dc as ae,Fb as ee,G as X,Gb as h,Ha as tt,I as w,Jb as te,Kb as ie,Lb as o,Mb as t,Nb as p,Nc as z,Ob as it,Pb as nt,Qb as ne,Rb as E,W as x,X as I,Xb as S,Z as A,Zb as u,aa as Y,bb as r,cb as v,cc as k,dc as P,ec as O,f as B,fa as Z,fc as oe,g as M,ga as V,gc as a,ic as g,la as N,m as H,n as W,qc as R,r as y,rc as re,sc as T,tc as Ye,wa as C,xa as b,xb as _,yc as $,zb as s,zc as j}from"./chunk-6GQID4PN.js";import{h as et}from"./chunk-UGUGGRN7.js";var _t=["drawer"],ht=(i,c)=>({"hover:bg-gray-100 dark:hover:bg-hover":i,"bg-primary-50 dark:bg-hover":c}),gt=(i,c)=>({"text-hint":i,"text-primary dark:text-primary-500":c}),vt=i=>({"text-primary dark:text-primary-500":i});function xt(i,c){if(i&1){let m=E();it(0),o(1,"div",6),S("click",function(){let n=C(m).$implicit,l=u();return b(l.goToPanel(n.id))}),p(2,"mat-icon",7),o(3,"div",8)(4,"div",9),a(5),t()()(),nt()}if(i&2){let m=c.$implicit,e=u();r(),s("ngClass",Ye(5,ht,!e.selectedPanel||e.selectedPanel!==m.id,e.selectedPanel&&e.selectedPanel===m.id)),r(),s("ngClass",Ye(8,gt,!e.selectedPanel||e.selectedPanel!==m.id,e.selectedPanel&&e.selectedPanel===m.id))("svgIcon",m.icon),r(2),s("ngClass",T(11,vt,e.selectedPanel&&e.selectedPanel===m.id)),r(),g(" ",m.title," ")}}var Ze=(()=>{let c=class c{constructor(e,n,l,d){this._fuseMediaWatcherService=e,this._changeDetectorRef=n,this.router=l,this.route=d,this.drawerMode="side",this.drawerOpened=!0,this.selectedPanel="account",this._unsubscribeAll=new B,this.fotografia=!0,this.paneles=[],this.completoOperacion=new tt}ngOnInit(){return et(this,null,function*(){this.paneles=[{id:"operativos",icon:"heroicons_outline:user-circle",title:"Operativos"},{id:"fase",icon:"heroicons_outline:bell",title:"Fase"}],this.selectedPanel="fichaPrincipal",this._fuseMediaWatcherService.onMediaChange$.pipe(I(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{e.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,n){return n.id||e}goToPanel(e){this.selectedPanel=e,this.uuid_fp?this.router.navigate([e,this.uuid_fp],{relativeTo:this.route}):this.router.navigate([e],{relativeTo:this.route})}getPanelInfo(e){return this.paneles.find(n=>n.id===e)}};c.\u0275fac=function(n){return new(n||c)(v(st),v(z),v(G),v(q))},c.\u0275cmp=N({type:c,selectors:[["operativos"]],viewQuery:function(n,l){if(n&1&&k(_t,5),n&2){let d;P(d=O())&&(l.drawer=d.first)}},outputs:{completoOperacion:"completoOperacion"},standalone:!0,features:[R],decls:7,vars:5,consts:[["drawer",""],[1,"flex","flex-col","w-full","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"flex-auto","sm:h-full"],[1,"sm:w-72","dark:bg-gray-900",3,"autoFocus","mode","opened"],[1,"flex","flex-col","divide-y","border-t","border-b"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","px-8","py-5","cursor-pointer",3,"click","ngClass"],[3,"ngClass","svgIcon"],[1,"ml-3"],[1,"font-medium","leading-6",3,"ngClass"]],template:function(n,l){n&1&&(o(0,"div",1)(1,"mat-drawer-container",2)(2,"mat-drawer",3,0)(4,"div",4),_(5,xt,6,13,"ng-container",5),t()(),p(6,"router-outlet"),t()()),n&2&&(r(2),s("autoFocus",!1)("mode",l.drawerMode)("opened",l.drawerOpened),r(3),s("ngForOf",l.paneles)("ngForTrackBy",l.trackByFn))},dependencies:[ct,rt,Q,ot,U,dt,mt,lt,at],encapsulation:2});let i=c;return i})();var Ke=(()=>{let c=class c{constructor(e){this._httpClient=e,this._pagination=new M(null),this._product=new M(null),this._products=new M(null)}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}getProducts(e=0,n=10,l="name",d="asc",f=""){return this._httpClient.get("api/apps/operativos/products",{params:{page:""+e,size:""+n,sort:l,order:d,search:f}}).pipe(A(F=>{this._pagination.next(F.pagination),this._products.next(F.products)}))}getProductById(e){return this._products.pipe(w(1),y(n=>{let l=n.find(d=>d.id===e)||null;return this._product.next(l),l}),x(n=>n?H(n):W("Could not found product with id of "+e+"!")))}createProduct(){return this.products$.pipe(w(1),x(e=>this._httpClient.post("api/apps/operativos/product",{}).pipe(y(n=>(this._products.next([n,...e]),n)))))}updateProduct(e,n){return this.products$.pipe(w(1),x(l=>this._httpClient.patch("api/apps/operativos/product",{id:e,product:n}).pipe(y(d=>{let f=l.findIndex(F=>F.id===e);return l[f]=d,this._products.next(l),d}),x(d=>this.product$.pipe(w(1),K(f=>f&&f.id===e),A(()=>(this._product.next(d),d)))))))}deleteProduct(e){return this.products$.pipe(w(1),x(n=>this._httpClient.delete("api/apps/operativos/product",{params:{id:e}}).pipe(y(l=>{let d=n.findIndex(f=>f.id===e);return n.splice(d,1),this._products.next(n),l}))))}};c.\u0275fac=function(n){return new(n||c)(Z(ce))},c.\u0275prov=Y({token:c,factory:c.\u0275fac,providedIn:"root"});let i=c;return i})();var Lt=i=>({"pointer-events-none":i}),Dt=()=>[5,10,25,100],Vt=i=>({$implicit:i});function Bt(i,c){i&1&&(o(0,"div",4),p(1,"mat-progress-bar",19),t()),i&2&&(r(),s("mode","indeterminate"))}function At(i,c){if(i&1){let m=E();o(0,"div",1)(1,"div",2)(2,"div",16)(3,"h1",20),a(4,"Crear Operativo"),t(),o(5,"h3",21),a(6,"Campos con s\xEDmbolo (*) son obligatorios "),t(),o(7,"mat-expansion-panel",22)(8,"mat-expansion-panel-header")(9,"mat-panel-title",23),a(10,"Datos Generales"),t()(),o(11,"div",16)(12,"form",24)(13,"div",25)(14,"mat-form-field",26)(15,"mat-label"),a(16,"Instituci\xF3n"),t(),p(17,"input",27),t(),o(18,"mat-form-field",28)(19,"mat-label"),a(20,"Operativo"),t(),p(21,"input",27),t(),o(22,"mat-form-field",29)(23,"mat-label"),a(24,"Fecha inicio"),t(),p(25,"input",27),t(),o(26,"mat-form-field",29)(27,"mat-label"),a(28,"Fecha fin"),t(),p(29,"input",27),t(),o(30,"mat-slide-toggle",30),a(31," Estado "),t()(),o(32,"div",31)(33,"button",32),S("click",function(){C(m);let n=u();return b(n.cancelar())}),a(34," Cancelar "),t(),o(35,"div",33)(36,"button",34),S("click",function(){C(m);let n=u();return n.crear(),b(n.show("alertBox3"))}),a(37," Crear "),t()()()()()()()()()}if(i&2){let m=u();r(7),s("expanded",m.crearSegment),r(23),s("color","primary"),r(3),s("color","warn"),r(3),s("color","primary")}}function Nt(i,c){i&1&&p(0,"mat-icon",49),i&2&&s("svgIcon","heroicons_solid:check")}function Rt(i,c){i&1&&p(0,"mat-icon",50),i&2&&s("svgIcon","heroicons_solid:x-mark")}function $t(i,c){i&1&&ne(0)}function jt(i,c){if(i&1&&_(0,$t,1,0,"ng-container",53),i&2){let m=u().$implicit;u(4);let e=oe(24);s("ngTemplateOutlet",e)("ngTemplateOutletContext",T(2,Vt,m))}}function zt(i,c){if(i&1){let m=E();o(0,"div",43),p(1,"div",33),o(2,"div",44),a(3),t(),o(4,"div",45),a(5),t(),o(6,"div",45),a(7),t(),o(8,"div",46),a(9),t(),o(10,"div",47)(11,"div",48),a(12),t()(),o(13,"div",46),a(14),t(),o(15,"div",46),a(16),t(),o(17,"div",41),_(18,Nt,1,1,"mat-icon",49)(19,Rt,1,1,"mat-icon",50),t(),o(20,"div",47)(21,"button",51),S("click",function(){let n=C(m).$implicit,l=u(4);return b(l.toggleDetails(n.id))}),p(22,"mat-icon",52),t(),o(23,"button",51),S("click",function(){let n=C(m).$implicit,l=u(4);return b(l.deleteProduct(n.id))}),p(24,"mat-icon",52),t()()(),o(25,"div",36),_(26,jt,1,4,"ng-container"),t()}if(i&2){let m=c.$implicit,e=u(4);r(3),g(" ",m.id," "),r(2),g(" ",m.inst," "),r(2),g(" ",m.op," "),r(2),g(" ",m.f_ini," "),r(3),g(" ",m.f_fin," "),r(2),g(" ",m.f_ing," "),r(2),g(" ",m.f_des," "),r(2),h(m.active?18:-1),r(),h(m.active?-1:19),r(3),s("svgIcon","heroicons_solid:pencil-square"),r(2),s("svgIcon","heroicons_solid:x-mark"),r(2),h((e.selectedProduct==null?null:e.selectedProduct.id)===m.id?26:-1)}}function Qt(i,c){i&1&&te(0,zt,27,12,null,null,ee().trackByFn,!0),i&2&&ie(c)}function qt(i,c){if(i&1&&(o(0,"div",36)(1,"div",37),p(2,"div"),o(3,"div",38),a(4," No. "),t(),o(5,"div",39),a(6," Instituci\xF3n "),t(),o(7,"div",39),a(8," Operativo "),t(),o(9,"div",40),a(10," Fecha inicio "),t(),o(11,"div",39),a(12," Fecha fin "),t(),o(13,"div",39),a(14," Fecha ingreso "),t(),o(15,"div",39),a(16," Fecha desactivaci\xF3n "),t(),o(17,"div",39),a(18," Activo "),t(),o(19,"div",41),a(20," Acciones "),t()(),_(21,Qt,2,0),$(22,"async"),t(),p(23,"mat-paginator",42)),i&2){let m,e=u(2);r(3),s("mat-sort-header","No."),r(2),s("mat-sort-header","inst"),r(2),s("mat-sort-header","op"),r(2),s("mat-sort-header","fini"),r(2),s("mat-sort-header","ffin"),r(2),s("mat-sort-header","fing"),r(2),s("mat-sort-header","fdes"),r(2),s("mat-sort-header","Active"),r(4),h((m=j(22,15,e.products$))?21:-1,m),r(2),s("ngClass",T(17,Lt,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",re(19,Dt))("showFirstLastButtons",!0)}}function Gt(i,c){i&1&&(o(0,"div",35),a(1," No hay operativos! "),t())}function Ut(i,c){i&1&&_(0,qt,24,20)(1,Gt,2,0,"div",35),i&2&&h(c.length>0?0:1)}function Ht(i,c){i&1&&(p(0,"mat-icon",65),o(1,"span",66),a(2,"Operativo Actualizado"),t()),i&2&&s("svgIcon","heroicons_outline:check")}function Wt(i,c){i&1&&(p(0,"mat-icon",67),o(1,"span",66),a(2,"An error occurred, try again!"),t()),i&2&&s("svgIcon","heroicons_outline:x-mark")}function Jt(i,c){if(i&1&&(o(0,"div",64),_(1,Ht,3,1)(2,Wt,3,1),t()),i&2){let m=u(2);r(),h(m.flashMessage==="success"?1:-1),r(),h(m.flashMessage==="error"?2:-1)}}function Kt(i,c){if(i&1){let m=E();o(0,"div",54)(1,"div",55)(2,"form",56)(3,"div",57)(4,"div",58)(5,"mat-form-field",59)(6,"mat-label"),a(7,"Instituci\xF3n"),t(),p(8,"input",60),t(),o(9,"mat-form-field",59)(10,"mat-label"),a(11,"Operativo"),t(),p(12,"input",60),t(),o(13,"mat-form-field",61)(14,"mat-label"),a(15,"Fecha inicio"),t(),p(16,"input",60),t()(),o(17,"div",58)(18,"mat-form-field",62)(19,"mat-label"),a(20,"Fecha fin"),t(),p(21,"input",60),t(),o(22,"mat-slide-toggle",63),a(23),t()()(),o(24,"div",31)(25,"button",32),S("click",function(){C(m);let n=u();return b(n.deleteSelectedProduct())}),a(26," Borrar "),t(),o(27,"div",33),_(28,Jt,3,2,"div",64),o(29,"button",34),S("click",function(){C(m);let n=u();return b(n.updateSelectedProduct())}),a(30," Actualizar "),t()()()()()()}if(i&2){let m=u();r(2),s("formGroup",m.selectedProductForm),r(6),s("formControlName","inst"),r(4),s("formControlName","op"),r(4),s("formControlName","f_ini"),r(5),s("formControlName","f_fin"),r(),s("formControlName","active")("color","primary"),r(),g(" ",m.selectedProductForm.get("active").value===!0?"Activo":"Inactivo"," "),r(2),s("color","warn"),r(3),h(m.flashMessage?28:-1),r(),s("color","primary")}}var ut=(()=>{let c=class c{constructor(e,n,l,d,f,F){this._changeDetectorRef=e,this._fuseConfirmationService=n,this._formBuilder=l,this._operativoService=d,this.router=f,this.route=F,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new Ie,this.selectedProduct=null,this._unsubscribeAll=new B,this._fuseAlertService=V($e),this.crearSegment=!1}crearOperativo(){this.crearSegment=!0}cancelar(){this.crearSegment=!1}crear(e){let n=this._fuseConfirmationService.open({title:"Creaci\xF3n de operativo exitosa",message:"El operativo fue creado de manera exitosa",actions:{confirm:{label:"Confirmar",color:"accent"}},icon:{show:!0,name:"heroicons_outline:check-circle",color:"success"}});this.crearSegment=!1}ngOnInit(){this.selectedProductForm=this._formBuilder.group({id:[""],inst:[""],op:[""],f_ini:[""],f_fin:[""],f_ing:[""],f_des:[""],active:[""]}),this._operativoService.pagination$.pipe(I(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.products$=this._operativoService.products$,this.searchInputControl.valueChanges.pipe(I(this._unsubscribeAll),X(300),x(e=>(this.closeDetails(),this.isLoading=!0,this._operativoService.getProducts(0,10,"name","asc",e))),y(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe(I(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),J(this._sort.sortChange,this._paginator.page).pipe(x(()=>(this.closeDetails(),this.isLoading=!0,this._operativoService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),y(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(e){if(this.selectedProduct&&this.selectedProduct.id===e){this.closeDetails();return}this._operativoService.getProductById(e).subscribe(n=>{this.selectedProduct=n,this.selectedProductForm.patchValue(n),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedProduct=null}cycleImages(e=!0){let n=this.selectedProductForm.get("images").value.length,l=this.selectedProductForm.get("currentImageIndex").value,d=l+1===n?0:l+1,f=l-1<0?n-1:l-1;e?this.selectedProductForm.get("currentImageIndex").setValue(d):this.selectedProductForm.get("currentImageIndex").setValue(f)}createProduct(){this._operativoService.createProduct().subscribe(e=>{this.selectedProduct=e,this.selectedProductForm.patchValue(e),this._changeDetectorRef.markForCheck()})}updateSelectedProduct(){let e=this.selectedProductForm.getRawValue();delete e.currentImageIndex,this._operativoService.updateProduct(e.id,e).subscribe(()=>{this.showFlashMessage("success")})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Borrar operativo",message:"\xBFEst\xE1s seguro que deseas borrar este operativo? Esta acci\xF3n es permanente",actions:{confirm:{label:"Borrar"}}}).afterClosed().subscribe(n=>{if(n==="confirmed"){let l=this.selectedProductForm.getRawValue();this._operativoService.deleteProduct(l.id).subscribe(()=>{this.closeDetails()})}})}deleteProduct(e){this._fuseConfirmationService.open({title:"Borrar operativo",message:"\xBFEst\xE1s seguro que deseas borrar este operativo? Esta acci\xF3n es permanente",actions:{confirm:{label:"Borrar"}}}).afterClosed().subscribe(l=>{l==="confirmed"&&this._operativoService.deleteProduct(e).subscribe(()=>{this.closeDetails()})})}showFlashMessage(e){this.flashMessage=e,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(e,n){return n.id||e}};c.\u0275fac=function(n){return new(n||c)(v(z),v(xe),v(Te),v(Ke),v(G),v(q))},c.\u0275cmp=N({type:c,selectors:[["operativos-list"]],viewQuery:function(n,l){if(n&1&&(k(D,5),k(L,5)),n&2){let d;P(d=O())&&(l._paginator=d.first),P(d=O())&&(l._sort=d.first)}},standalone:!0,features:[R],decls:25,vars:12,consts:[["rowDetailsTemplate",""],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"flex-auto","p-6","sm:p-10"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"absolute","inset-x-0","bottom-0"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex"],["src","images/logo/PDF.svg","alt","Logo image",1,"w-6"],["src","images/logo/Excel.svg","alt","Logo image",1,"w-7"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"container"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"mode"],[1,"text-4xl","font-bold","pb-3","text-contrast"],[1,"pb-3","text-contrast"],[3,"expanded"],[1,"font-bold","text-black"],[1,"mt-8"],[1,"grid","gap-4","grid-cols-1","md:grid-cols-8"],[1,"col-span-4"],["matInput",""],[1,"col-span-3"],[1,"col-span-2"],[1,"col-span-1",3,"color"],[1,"flex","w-full","items-center","justify-end","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"click","color"],[1,"flex","items-center"],["mat-flat-button","",3,"click","color"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"grid"],["matSort","","matSortDisableClear","",1,"operativo-grid","text-secondary","sticky","top-0","z-10","grid","gap-4","bg-gray-50","px-6","py-4","text-md","font-semibold","shadow","dark:bg-black","dark:bg-opacity-5","md:px-8"],[1,"hidden","md:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block"],[1,"z-10","border-b","bg-gray-50","dark:bg-transparent","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-b-0","sm:border-t",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"operativo-grid","grid","items-center","gap-4","border-b","px-6","py-3","md:px-8"],[1,"hidden","truncate","md:block"],[1,"truncate"],[1,"hidden","sm:block"],[1,"hidden","items-center","lg:flex"],[1,"min-w-4"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"h-7","min-h-7","min-w-10","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"overflow-hidden","shadow-lg"],[1,"flex","border-b"],[1,"flex","w-full","flex-col",3,"formGroup"],[1,"flex","flex-auto","p-8","sm:flex-row"],[1,"flex","flex-auto"],[1,"w-full","pr-2"],["matInput","",3,"formControlName"],[1,"w-full","pl-2"],[1,"w-1/3","pl-2","pr-4"],[3,"formControlName","color"],[1,"mr-4","flex","items-center"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"]],template:function(n,l){if(n&1){let d=E();o(0,"div",1)(1,"div",2)(2,"div",3),_(3,Bt,2,1,"div",4),o(4,"div",5),a(5,"Operativos "),o(6,"div",6),p(7,"img",7)(8,"img",8),t()(),o(9,"div",9)(10,"mat-form-field",10),p(11,"mat-icon",11)(12,"input",12),t(),o(13,"button",13),S("click",function(){return C(d),b(l.crearOperativo())}),p(14,"mat-icon",14),o(15,"span",15),a(16,"A\xF1adir"),t()()()(),o(17,"div",16),_(18,At,38,4,"div",1),o(19,"div",17)(20,"div",18),_(21,Ut,2,1),$(22,"async"),_(23,Kt,31,11,"ng-template",null,0,ae),t()()()()()}if(n&2){let d;r(3),h(l.isLoading?3:-1),r(7),s("subscriptSizing","dynamic"),r(),s("svgIcon","heroicons_solid:magnifying-glass"),r(),s("formControl",l.searchInputControl)("autocomplete","off")("placeholder","Buscar Operativo"),r(),s("color","primary"),r(),s("svgIcon","heroicons_outline:plus"),r(4),h(l.crearSegment?18:-1),r(3),h((d=j(22,10,l.products$))?21:-1,d)}},dependencies:[be,Ce,_e,fe,pe,ue,He,qe,Ge,Ue,ve,U,Be,Ve,Le,Me,ye,Fe,we,Ee,De,ke,Pe,Oe,ge,he,ze,L,je,le,We,D,Q,Ne,Ae,Qe,de,Re,me,se],styles:[`.operativo-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.operativo-grid{grid-template-columns:10px auto 112px 72px}}@media (min-width: 960px){.operativo-grid{grid-template-columns:10px 112px 300px 112px 72px}}@media (min-width: 1280px){.operativo-grid{grid-template-columns:10px 35px auto 100px 120px 120px 120px 150px 50px 100px}}
`],encapsulation:2,data:{animation:Se},changeDetection:0});let i=c;return i})();var Xe=(()=>{let c=class c{constructor(e){this._httpClient=e,this._pagination=new M(null),this._product=new M(null),this._products=new M(null)}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}getProducts(e=0,n=10,l="name",d="asc",f=""){return this._httpClient.get("api/apps/fases/products",{params:{page:""+e,size:""+n,sort:l,order:d,search:f}}).pipe(A(F=>{this._pagination.next(F.pagination),this._products.next(F.products)}))}getProductById(e){return this._products.pipe(w(1),y(n=>{let l=n.find(d=>d.id===e)||null;return this._product.next(l),l}),x(n=>n?H(n):W("Could not found product with id of "+e+"!")))}createProduct(){return this.products$.pipe(w(1),x(e=>this._httpClient.post("api/apps/fases/product",{}).pipe(y(n=>(this._products.next([n,...e]),n)))))}updateProduct(e,n){return this.products$.pipe(w(1),x(l=>this._httpClient.patch("api/apps/fases/product",{id:e,product:n}).pipe(y(d=>{let f=l.findIndex(F=>F.id===e);return l[f]=d,this._products.next(l),d}),x(d=>this.product$.pipe(w(1),K(f=>f&&f.id===e),A(()=>(this._product.next(d),d)))))))}deleteProduct(e){return this.products$.pipe(w(1),x(n=>this._httpClient.delete("api/apps/fases/product",{params:{id:e}}).pipe(y(l=>{let d=n.findIndex(f=>f.id===e);return n.splice(d,1),this._products.next(n),l}))))}};c.\u0275fac=function(n){return new(n||c)(Z(ce))},c.\u0275prov=Y({token:c,factory:c.\u0275fac,providedIn:"root"});let i=c;return i})();var Yt=i=>({"pointer-events-none":i}),Zt=()=>[5,10,25,100],ei=i=>({$implicit:i});function ti(i,c){i&1&&(o(0,"div",4),p(1,"mat-progress-bar",19),t()),i&2&&(r(),s("mode","indeterminate"))}function ii(i,c){if(i&1){let m=E();o(0,"div",1)(1,"div",2)(2,"div",16)(3,"h1",20),a(4,"Crear Fase"),t(),o(5,"h3",21),a(6,"Campos con s\xEDmbolo (*) son obligatorios "),t(),o(7,"mat-expansion-panel",22)(8,"mat-expansion-panel-header")(9,"mat-panel-title",23),a(10,"Datos Generales"),t()(),o(11,"div",16)(12,"form",24)(13,"div",25)(14,"mat-form-field",26)(15,"mat-label"),a(16,"Instituci\xF3n"),t(),p(17,"input",27),t(),o(18,"mat-form-field",28)(19,"mat-label"),a(20,"Operativo"),t(),p(21,"input",27),t(),o(22,"mat-form-field",26)(23,"mat-label"),a(24,"Modalidad de recopilaci\xF3n de datos"),t(),p(25,"input",27),t(),o(26,"mat-form-field",28)(27,"mat-label"),a(28,"Nombre Fase"),t(),p(29,"input",27),t(),o(30,"mat-form-field",29)(31,"mat-label"),a(32,"Id Fase"),t(),p(33,"input",27),t(),o(34,"mat-form-field",30)(35,"mat-label"),a(36,"Fecha inicio"),t(),p(37,"input",27),t(),o(38,"mat-form-field",30)(39,"mat-label"),a(40,"Fecha fin"),t(),p(41,"input",27),t(),o(42,"mat-slide-toggle",31),a(43," Estado "),t()(),o(44,"div",32)(45,"button",33),S("click",function(){C(m);let n=u();return b(n.cancelar())}),a(46," Cancelar "),t(),o(47,"div",34)(48,"button",35),S("click",function(){C(m);let n=u();return n.crear(),b(n.show("alertBox3"))}),a(49," Crear "),t()()()()()()()()()}if(i&2){let m=u();r(7),s("expanded",m.crearSegment),r(35),s("color","primary"),r(3),s("color","warn"),r(3),s("color","primary")}}function ni(i,c){i&1&&p(0,"mat-icon",50),i&2&&s("svgIcon","heroicons_solid:check")}function oi(i,c){i&1&&p(0,"mat-icon",51),i&2&&s("svgIcon","heroicons_solid:x-mark")}function ri(i,c){i&1&&ne(0)}function ai(i,c){if(i&1&&_(0,ri,1,0,"ng-container",54),i&2){let m=u().$implicit;u(4);let e=oe(24);s("ngTemplateOutlet",e)("ngTemplateOutletContext",T(2,ei,m))}}function li(i,c){if(i&1){let m=E();o(0,"div",44),p(1,"div",34),o(2,"div",45),a(3),t(),o(4,"div",46),a(5),t(),o(6,"div",46),a(7),t(),o(8,"div",46),a(9),t(),o(10,"div",46),a(11),t(),o(12,"div",46),a(13),t(),o(14,"div",47),a(15),t(),o(16,"div",48)(17,"div",49),a(18),t()(),o(19,"div",42),_(20,ni,1,1,"mat-icon",50)(21,oi,1,1,"mat-icon",51),t(),o(22,"div",48)(23,"button",52),S("click",function(){let n=C(m).$implicit,l=u(4);return b(l.toggleDetails(n.id))}),p(24,"mat-icon",53),t(),o(25,"button",52),S("click",function(){let n=C(m).$implicit,l=u(4);return b(l.deleteProduct(n.id))}),p(26,"mat-icon",53),t()()(),o(27,"div",37),_(28,ai,1,4,"ng-container"),t()}if(i&2){let m=c.$implicit,e=u(4);r(3),g(" ",m.id," "),r(2),g(" ",m.inst," "),r(2),g(" ",m.op," "),r(2),g(" ",m.mod," "),r(2),g(" ",m.nomf," "),r(2),g(" ",m.idf," "),r(2),g(" ",m.f_ini," "),r(3),g(" ",m.f_fin," "),r(2),h(m.active?20:-1),r(),h(m.active?-1:21),r(3),s("svgIcon","heroicons_solid:pencil-square"),r(2),s("svgIcon","heroicons_solid:x-mark"),r(2),h((e.selectedProduct==null?null:e.selectedProduct.id)===m.id?28:-1)}}function si(i,c){i&1&&te(0,li,29,13,null,null,ee().trackByFn,!0),i&2&&ie(c)}function ci(i,c){if(i&1&&(o(0,"div",37)(1,"div",38),p(2,"div"),o(3,"div",39),a(4," No. "),t(),o(5,"div",40),a(6,"Instituci\xF3n"),t(),o(7,"div",40),a(8,"Operativo"),t(),o(9,"div",40),a(10,"Modalidad de recopilaci\xF3n de datos"),t(),o(11,"div",40),a(12,"Nombre Fase"),t(),o(13,"div",40),a(14,"Id Fase"),t(),o(15,"div",41),a(16," Fecha inicio "),t(),o(17,"div",40),a(18," Fecha fin "),t(),o(19,"div",40),a(20," Activo "),t(),o(21,"div",42),a(22," Acciones "),t()(),_(23,si,2,0),$(24,"async"),t(),p(25,"mat-paginator",43)),i&2){let m,e=u(2);r(3),s("mat-sort-header","No."),r(2),s("mat-sort-header","inst"),r(2),s("mat-sort-header","op"),r(2),s("mat-sort-header","mod"),r(2),s("mat-sort-header","nomf"),r(2),s("mat-sort-header","idf"),r(2),s("mat-sort-header","fini"),r(2),s("mat-sort-header","ffin"),r(2),s("mat-sort-header","Active"),r(4),h((m=j(24,16,e.products$))?23:-1,m),r(2),s("ngClass",T(18,Yt,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",re(20,Zt))("showFirstLastButtons",!0)}}function mi(i,c){i&1&&(o(0,"div",36),a(1," No hay fases! "),t())}function di(i,c){i&1&&_(0,ci,26,21)(1,mi,2,0,"div",36),i&2&&h(c.length>0?0:1)}function pi(i,c){i&1&&(p(0,"mat-icon",66),o(1,"span",67),a(2,"Fase Actualizado"),t()),i&2&&s("svgIcon","heroicons_outline:check")}function ui(i,c){i&1&&(p(0,"mat-icon",68),o(1,"span",67),a(2,"An error occurred, try again!"),t()),i&2&&s("svgIcon","heroicons_outline:x-mark")}function fi(i,c){if(i&1&&(o(0,"div",65),_(1,pi,3,1)(2,ui,3,1),t()),i&2){let m=u(2);r(),h(m.flashMessage==="success"?1:-1),r(),h(m.flashMessage==="error"?2:-1)}}function _i(i,c){if(i&1){let m=E();o(0,"div",55)(1,"div",56)(2,"form",57)(3,"div",58)(4,"div",59)(5,"mat-form-field",60)(6,"mat-label"),a(7,"Instituci\xF3n"),t(),p(8,"input",61),t(),o(9,"mat-form-field",60)(10,"mat-label"),a(11,"Operativo"),t(),p(12,"input",61),t(),o(13,"mat-form-field",60)(14,"mat-label"),a(15,"Modalidad"),t(),p(16,"input",61),t(),o(17,"mat-form-field",60)(18,"mat-label"),a(19,"Nombre Fase"),t(),p(20,"input",61),t(),o(21,"mat-form-field",60)(22,"mat-label"),a(23,"Id Fase"),t(),p(24,"input",61),t(),o(25,"mat-form-field",62)(26,"mat-label"),a(27,"Fecha inicio"),t(),p(28,"input",61),t()(),o(29,"div",59)(30,"mat-form-field",63)(31,"mat-label"),a(32,"Fecha fin"),t(),p(33,"input",61),t(),o(34,"mat-slide-toggle",64),a(35),t()()(),o(36,"div",32)(37,"button",33),S("click",function(){C(m);let n=u();return b(n.deleteSelectedProduct())}),a(38," Borrar "),t(),o(39,"div",34),_(40,fi,3,2,"div",65),o(41,"button",35),S("click",function(){C(m);let n=u();return b(n.updateSelectedProduct())}),a(42," Actualizar "),t()()()()()()}if(i&2){let m=u();r(2),s("formGroup",m.selectedProductForm),r(6),s("formControlName","inst"),r(4),s("formControlName","op"),r(4),s("formControlName","mod"),r(4),s("formControlName","nomf"),r(4),s("formControlName","idf"),r(4),s("formControlName","f_ini"),r(5),s("formControlName","f_fin"),r(),s("formControlName","active")("color","primary"),r(),g(" ",m.selectedProductForm.get("active").value===!0?"Activo":"Inactivo"," "),r(2),s("color","warn"),r(3),h(m.flashMessage?40:-1),r(),s("color","primary")}}var ft=(()=>{let c=class c{constructor(e,n,l,d,f,F){this._changeDetectorRef=e,this._fuseConfirmationService=n,this._formBuilder=l,this._faseService=d,this.router=f,this.route=F,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new Ie,this.selectedProduct=null,this._unsubscribeAll=new B,this._fuseAlertService=V($e),this.crearSegment=!1}crearFase(){this.crearSegment=!0}cancelar(){this.crearSegment=!1}crear(e){let n=this._fuseConfirmationService.open({title:"Creaci\xF3n de fase exitosa",message:"El fase fue creado de manera exitosa",actions:{confirm:{label:"Confirmar",color:"accent"}},icon:{show:!0,name:"heroicons_outline:check-circle",color:"success"}});this.crearSegment=!1}ngOnInit(){this.selectedProductForm=this._formBuilder.group({id:[""],inst:[""],op:[""],mod:[""],nomf:[""],idf:[""],f_ini:[""],f_fin:[""],f_ing:[""],f_des:[""],active:[""]}),this._faseService.pagination$.pipe(I(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.products$=this._faseService.products$,this.searchInputControl.valueChanges.pipe(I(this._unsubscribeAll),X(300),x(e=>(this.closeDetails(),this.isLoading=!0,this._faseService.getProducts(0,10,"name","asc",e))),y(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe(I(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),J(this._sort.sortChange,this._paginator.page).pipe(x(()=>(this.closeDetails(),this.isLoading=!0,this._faseService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),y(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(e){if(this.selectedProduct&&this.selectedProduct.id===e){this.closeDetails();return}this._faseService.getProductById(e).subscribe(n=>{this.selectedProduct=n,this.selectedProductForm.patchValue(n),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedProduct=null}cycleImages(e=!0){let n=this.selectedProductForm.get("images").value.length,l=this.selectedProductForm.get("currentImageIndex").value,d=l+1===n?0:l+1,f=l-1<0?n-1:l-1;e?this.selectedProductForm.get("currentImageIndex").setValue(d):this.selectedProductForm.get("currentImageIndex").setValue(f)}createProduct(){this._faseService.createProduct().subscribe(e=>{this.selectedProduct=e,this.selectedProductForm.patchValue(e),this._changeDetectorRef.markForCheck()})}updateSelectedProduct(){let e=this.selectedProductForm.getRawValue();delete e.currentImageIndex,this._faseService.updateProduct(e.id,e).subscribe(()=>{this.showFlashMessage("success")})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Borrar fase",message:"\xBFEst\xE1s seguro que deseas borrar este fase? Esta acci\xF3n es permanente",actions:{confirm:{label:"Borrar"}}}).afterClosed().subscribe(n=>{if(n==="confirmed"){let l=this.selectedProductForm.getRawValue();this._faseService.deleteProduct(l.id).subscribe(()=>{this.closeDetails()})}})}deleteProduct(e){this._fuseConfirmationService.open({title:"Borrar fase",message:"\xBFEst\xE1s seguro que deseas borrar este fase? Esta acci\xF3n es permanente",actions:{confirm:{label:"Borrar"}}}).afterClosed().subscribe(l=>{l==="confirmed"&&this._faseService.deleteProduct(e).subscribe(()=>{this.closeDetails()})})}showFlashMessage(e){this.flashMessage=e,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(e,n){return n.id||e}};c.\u0275fac=function(n){return new(n||c)(v(z),v(xe),v(Te),v(Xe),v(G),v(q))},c.\u0275cmp=N({type:c,selectors:[["fases-list"]],viewQuery:function(n,l){if(n&1&&(k(D,5),k(L,5)),n&2){let d;P(d=O())&&(l._paginator=d.first),P(d=O())&&(l._sort=d.first)}},standalone:!0,features:[R],decls:25,vars:12,consts:[["rowDetailsTemplate",""],[1,"flex","min-w-0","flex-auto","flex-col"],[1,"flex-auto","p-6","sm:p-10"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"absolute","inset-x-0","bottom-0"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex"],["src","images/logo/PDF.svg","alt","Logo image",1,"w-6"],["src","images/logo/Excel.svg","alt","Logo image",1,"w-7"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"container"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"mode"],[1,"text-4xl","font-bold","pb-3","text-contrast"],[1,"pb-3","text-contrast"],[3,"expanded"],[1,"font-bold","text-black"],[1,"mt-8"],[1,"grid","gap-4","grid-cols-1","md:grid-cols-8"],[1,"col-span-4"],["matInput",""],[1,"col-span-3"],[1,"col-span-1"],[1,"col-span-2"],[1,"col-span-1",3,"color"],[1,"flex","w-full","items-center","justify-end","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"click","color"],[1,"flex","items-center"],["mat-flat-button","",3,"click","color"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"grid"],["matSort","","matSortDisableClear","",1,"fase-grid","text-secondary","sticky","top-0","z-10","grid","gap-4","bg-gray-50","px-6","py-4","text-md","font-semibold","shadow","dark:bg-black","dark:bg-opacity-5","md:px-8"],[1,"hidden","md:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block"],[1,"z-10","border-b","bg-gray-50","dark:bg-transparent","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-b-0","sm:border-t",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"fase-grid","grid","items-center","gap-4","border-b","px-6","py-3","md:px-8"],[1,"hidden","truncate","md:block"],[1,"truncate"],[1,"hidden","sm:block"],[1,"hidden","items-center","lg:flex"],[1,"min-w-4"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"h-7","min-h-7","min-w-10","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"overflow-hidden","shadow-lg"],[1,"flex","border-b"],[1,"flex","w-full","flex-col",3,"formGroup"],[1,"flex","flex-auto","p-8","sm:flex-row"],[1,"flex","flex-auto"],[1,"w-full","pr-2"],["matInput","",3,"formControlName"],[1,"w-full","pl-2"],[1,"w-1/3","pl-2","pr-4"],[3,"formControlName","color"],[1,"mr-4","flex","items-center"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"]],template:function(n,l){if(n&1){let d=E();o(0,"div",1)(1,"div",2)(2,"div",3),_(3,ti,2,1,"div",4),o(4,"div",5),a(5,"Fases "),o(6,"div",6),p(7,"img",7)(8,"img",8),t()(),o(9,"div",9)(10,"mat-form-field",10),p(11,"mat-icon",11)(12,"input",12),t(),o(13,"button",13),S("click",function(){return C(d),b(l.crearFase())}),p(14,"mat-icon",14),o(15,"span",15),a(16,"A\xF1adir"),t()()()(),o(17,"div",16),_(18,ii,50,4,"div",1),o(19,"div",17)(20,"div",18),_(21,di,2,1),$(22,"async"),_(23,_i,43,14,"ng-template",null,0,ae),t()()()()()}if(n&2){let d;r(3),h(l.isLoading?3:-1),r(7),s("subscriptSizing","dynamic"),r(),s("svgIcon","heroicons_solid:magnifying-glass"),r(),s("formControl",l.searchInputControl)("autocomplete","off")("placeholder","Buscar Fase"),r(),s("color","primary"),r(),s("svgIcon","heroicons_outline:plus"),r(4),h(l.crearSegment?18:-1),r(3),h((d=j(22,10,l.products$))?21:-1,d)}},dependencies:[be,Ce,_e,fe,pe,ue,He,qe,Ge,Ue,ve,U,Be,Ve,Le,Me,ye,Fe,we,Ee,De,ke,Pe,Oe,ge,he,ze,L,je,le,We,D,Q,Ne,Ae,Qe,de,Re,me,se],styles:[`.fase-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.fase-grid{grid-template-columns:10px auto 112px 72px}}@media (min-width: 960px){.fase-grid{grid-template-columns:10px 112px 300px 112px 72px}}@media (min-width: 1280px){.fase-grid{grid-template-columns:0px 10px 75px 75px auto 100px 35px 100px 100px 50px 100px}}
`],encapsulation:2,data:{animation:Se},changeDetection:0});let i=c;return i})();var Vn=[{path:"",pathMatch:"full",redirectTo:"us"},{path:"",component:Ze,children:[{path:"",component:Ze},{path:"operativos",component:ut,resolve:{products:()=>V(Ke).getProducts()}},{path:"fase",component:ft,resolve:{products:()=>V(Xe).getProducts()}}]}];export{Vn as default};
