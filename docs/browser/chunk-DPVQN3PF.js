import{a as s,b as M,c as d,d as b,e as u,f as v}from"./chunk-VI3A2MNL.js";import"./chunk-QXNANTBY.js";import"./chunk-UR7PGQIP.js";import"./chunk-5X7GK2KA.js";import"./chunk-AJHDA33D.js";import"./chunk-AYI3EEAB.js";import"./chunk-OGEMQ3QH.js";import"./chunk-S2CBO73K.js";import"./chunk-E2KUMYPZ.js";import"./chunk-DSM6MMKV.js";import"./chunk-WJBINPGC.js";import"./chunk-E4LHMMAG.js";import{e as g}from"./chunk-YCUPTL4E.js";import"./chunk-KNWMQCEV.js";import"./chunk-DJ6U3CR5.js";import"./chunk-WSYD3MQ4.js";import"./chunk-SVDFLEDS.js";import"./chunk-2EQGCBQH.js";import"./chunk-EVOFR55X.js";import"./chunk-TG5MFZGV.js";import"./chunk-ALUJXGDR.js";import"./chunk-PPBJAGE4.js";import"./chunk-I5HVJAQM.js";import"./chunk-PDN63WDF.js";import"./chunk-ALNACMX2.js";import"./chunk-TEVK5W77.js";import"./chunk-3KSSSXKG.js";import"./chunk-HILZ2HD3.js";import"./chunk-B4J42JTZ.js";import{d as f}from"./chunk-GZTXKECA.js";import"./chunk-JCRYDSVT.js";import"./chunk-5NA7XKUG.js";import{E as m,M as h,ga as o,n,x as c}from"./chunk-6GQID4PN.js";import"./chunk-UGUGGRN7.js";var C=e=>{let r=e,a={};return e[0].path==="settings"?null:(e[0].path==="filter"||e[0].path==="label"?(a[e[0].path]=e[1],a.page=e[2],e[3]&&(r=e.slice(0,-1))):(a.folder=e[0],a.page=e[1],e[2]&&(r=e.slice(0,-1))),{consumed:r,posParams:a})},x=(e,r)=>{let a=e;for(;a.firstChild;)a=a.firstChild;let l=r;for(;l.firstChild;)l=l.firstChild;if(a.paramMap.get("id")&&!l.paramMap.get("id"))return!0;let i={},t={};return e.paramMap.keys.forEach(p=>{i[p]=e.paramMap.get(p)}),r.paramMap.keys.forEach(p=>{t[p]=r.paramMap.get(p)}),!g(i,t)},R=(e,r)=>{let a=o(s),l=o(f);if(e.paramMap.get("page")&&parseInt(e.paramMap.get("page"),10)<=0){let t=r.url.split("/").slice(0,-1).join("/")+"/1";return l.navigateByUrl(t),!1}let i=[];return e.paramMap.get("folder")&&i.push(a.getMailsByFolder(e.paramMap.get("folder"),e.paramMap.get("page"))),e.paramMap.get("filter")&&i.push(a.getMailsByFilter(e.paramMap.get("filter"),e.paramMap.get("page"))),e.paramMap.get("label")&&i.push(a.getMailsByLabel(e.paramMap.get("label"),e.paramMap.get("page"))),c(i).pipe(h(()=>{let t=e;for(;t.firstChild;)t=t.firstChild;t.paramMap.get("id")||a.resetMail().subscribe()}),m(t=>{console.error(t.message);let p=r.url.split("/").slice(0,-1).join("/")+"/"+t.pagination.lastPage;return l.navigateByUrl(p),n(t)}))},y=(e,r)=>{let a=o(s),l=o(f);return a.getMailById(e.paramMap.get("id")).pipe(m(i=>{console.error(i);let t=r.url.split("/").slice(0,-1).join("/");return l.navigateByUrl(t),n(i)}))},A=[{path:"",redirectTo:"inbox/1",pathMatch:"full"},{path:"filter/:filter",redirectTo:"filter/:filter/1",pathMatch:"full"},{path:"label/:label",redirectTo:"label/:label/1",pathMatch:"full"},{path:":folder",redirectTo:":folder/1",pathMatch:"full"},{path:"",component:b,resolve:{filters:()=>o(s).getFilters(),folders:()=>o(s).getFolders(),labels:()=>o(s).getLabels()},children:[{component:u,matcher:C,runGuardsAndResolvers:x,resolve:{mails:R},children:[{path:"",pathMatch:"full",component:d},{path:":id",component:M,resolve:{mail:y}}]},{path:"settings",component:v}]}];export{A as default};
