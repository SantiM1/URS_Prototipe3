import{a as z,b as it}from"./chunk-3EQ35R3K.js";import{a as O,b as Ye,c as Ze}from"./chunk-7HG4JEJQ.js";import{a as et,c as tt}from"./chunk-AJHDA33D.js";import{a as Fe}from"./chunk-JG2SQQ7U.js";import{a as He,b as We}from"./chunk-WDPTQNZ7.js";import"./chunk-DSM6MMKV.js";import"./chunk-WJBINPGC.js";import{a as Pe,b as Me}from"./chunk-E4LHMMAG.js";import"./chunk-YCUPTL4E.js";import"./chunk-KNWMQCEV.js";import"./chunk-DJ6U3CR5.js";import"./chunk-WSYD3MQ4.js";import"./chunk-SVDFLEDS.js";import{a as Je,b as Xe}from"./chunk-2EQGCBQH.js";import{d as qe,e as Ke}from"./chunk-TG5MFZGV.js";import{a as xe,d as Ce,e as ye,i as be,j as Ie}from"./chunk-ALUJXGDR.js";import"./chunk-PPBJAGE4.js";import{b as Ve,d as De,f as $e,g as Be,j as Ne,l as Re,m as Ae,n as Oe,o as ze,r as je,v as Ue,w as Qe,x as Ge}from"./chunk-I5HVJAQM.js";import{a as we,c as Se,e as ke}from"./chunk-PDN63WDF.js";import{b as Te,c as Ee}from"./chunk-ALNACMX2.js";import{E as ge,F as fe,L as he,O as ve}from"./chunk-TEVK5W77.js";import"./chunk-3KSSSXKG.js";import{a as Le}from"./chunk-HILZ2HD3.js";import"./chunk-B4J42JTZ.js";import{c as _e}from"./chunk-GZTXKECA.js";import{c as ue}from"./chunk-JCRYDSVT.js";import{k as ce,p as me,q as de,y as pe}from"./chunk-5NA7XKUG.js";import{B as Z,C as j,Cc as ae,Dc as le,Fb as B,G as U,Gb as _,I as b,Ib as N,Jb as P,Kb as M,Lb as o,Mb as n,Nb as p,Nc as se,Qb as ie,Rb as T,W as x,X as k,Xb as C,Z as F,Zb as u,_a as Q,aa as ee,bb as r,cb as V,cc as G,dc as q,ec as K,f as J,fa as te,fc as D,g as S,ga as L,gc as m,hc as ne,ic as I,jc as oe,la as $,m as X,n as Y,qc as R,r as y,rc as re,sc as H,wa as h,xa as v,xb as f,yc as A,zb as c,zc as W}from"./chunk-6GQID4PN.js";import"./chunk-UGUGGRN7.js";var ot=(()=>{let l=class l{constructor(){}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=$({type:l,selectors:[["inventory"]],standalone:!0,features:[R],decls:1,vars:0,template:function(i,s){i&1&&p(0,"router-outlet")},dependencies:[_e],encapsulation:2,changeDetection:0});let t=l;return t})();var E=(()=>{let l=class l{constructor(e){this._httpClient=e,this._brands=new S(null),this._categories=new S(null),this._pagination=new S(null),this._product=new S(null),this._products=new S(null),this._tags=new S(null),this._vendors=new S(null)}get brands$(){return this._brands.asObservable()}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}get tags$(){return this._tags.asObservable()}get vendors$(){return this._vendors.asObservable()}getBrands(){return this._httpClient.get("api/apps/ecommerce/inventory/brands").pipe(F(e=>{this._brands.next(e)}))}getCategories(){return this._httpClient.get("api/apps/ecommerce/inventory/categories").pipe(F(e=>{this._categories.next(e)}))}getProducts(e=0,i=10,s="name",d="asc",g=""){return this._httpClient.get("api/apps/ecommerce/inventory/products",{params:{page:""+e,size:""+i,sort:s,order:d,search:g}}).pipe(F(w=>{this._pagination.next(w.pagination),this._products.next(w.products)}))}getProductById(e){return this._products.pipe(b(1),y(i=>{let s=i.find(d=>d.id===e)||null;return this._product.next(s),s}),x(i=>i?X(i):Y("Could not found product with id of "+e+"!")))}createProduct(){return this.products$.pipe(b(1),x(e=>this._httpClient.post("api/apps/ecommerce/inventory/product",{}).pipe(y(i=>(this._products.next([i,...e]),i)))))}updateProduct(e,i){return this.products$.pipe(b(1),x(s=>this._httpClient.patch("api/apps/ecommerce/inventory/product",{id:e,product:i}).pipe(y(d=>{let g=s.findIndex(w=>w.id===e);return s[g]=d,this._products.next(s),d}),x(d=>this.product$.pipe(b(1),j(g=>g&&g.id===e),F(()=>(this._product.next(d),d)))))))}deleteProduct(e){return this.products$.pipe(b(1),x(i=>this._httpClient.delete("api/apps/ecommerce/inventory/product",{params:{id:e}}).pipe(y(s=>{let d=i.findIndex(g=>g.id===e);return i.splice(d,1),this._products.next(i),s}))))}getTags(){return this._httpClient.get("api/apps/ecommerce/inventory/tags").pipe(F(e=>{this._tags.next(e)}))}createTag(e){return this.tags$.pipe(b(1),x(i=>this._httpClient.post("api/apps/ecommerce/inventory/tag",{tag:e}).pipe(y(s=>(this._tags.next([...i,s]),s)))))}updateTag(e,i){return this.tags$.pipe(b(1),x(s=>this._httpClient.patch("api/apps/ecommerce/inventory/tag",{id:e,tag:i}).pipe(y(d=>{let g=s.findIndex(w=>w.id===e);return s[g]=d,this._tags.next(s),d}))))}deleteTag(e){return this.tags$.pipe(b(1),x(i=>this._httpClient.delete("api/apps/ecommerce/inventory/tag",{params:{id:e}}).pipe(y(s=>{let d=i.findIndex(g=>g.id===e);return i.splice(d,1),this._tags.next(i),s}),j(s=>s),x(s=>this.products$.pipe(b(1),y(d=>(d.forEach(g=>{let w=g.tags.findIndex(at=>at===e);w>-1&&g.tags.splice(w,1)}),s)))))))}getVendors(){return this._httpClient.get("api/apps/ecommerce/inventory/vendors").pipe(F(e=>{this._vendors.next(e)}))}};l.\u0275fac=function(i){return new(i||l)(te(ue))},l.\u0275prov=ee({token:l,factory:l.\u0275fac,providedIn:"root"});let t=l;return t})();var st=t=>({"pointer-events-none":t}),ct=()=>[5,10,25,100],mt=t=>({$implicit:t});function dt(t,l){t&1&&(o(0,"div",4),p(1,"mat-progress-bar",15),n()),t&2&&(r(),c("mode","indeterminate"))}function pt(t,l){if(t&1&&p(0,"img",28),t&2){let a=u().$implicit;c("alt","Product thumbnail image")("src",a.thumbnail,Q)}}function ut(t,l){t&1&&(o(0,"div",29),m(1," NO THUMB "),n())}function _t(t,l){t&1&&(o(0,"div",34),p(1,"div",42),n())}function gt(t,l){t&1&&(o(0,"div",35),p(1,"div",43),n())}function ft(t,l){t&1&&(o(0,"div",36),p(1,"div",44),n())}function ht(t,l){t&1&&p(0,"mat-icon",38),t&2&&c("svgIcon","heroicons_solid:check")}function vt(t,l){t&1&&p(0,"mat-icon",39),t&2&&c("svgIcon","heroicons_solid:x-mark")}function xt(t,l){t&1&&ie(0)}function Ct(t,l){if(t&1&&f(0,xt,1,0,"ng-container",45),t&2){let a=u().$implicit;u(4);let e=D(18);c("ngTemplateOutlet",e)("ngTemplateOutletContext",H(2,mt,a))}}function yt(t,l){if(t&1){let a=T();o(0,"div",25)(1,"div",26)(2,"div",27),f(3,pt,1,2,"img",28)(4,ut,2,0,"div",29),n()(),o(5,"div",30),m(6),n(),o(7,"div",31),m(8),n(),o(9,"div",23),m(10),A(11,"currency"),n(),o(12,"div",32)(13,"div",33),m(14),n(),f(15,_t,2,0,"div",34)(16,gt,2,0,"div",35)(17,ft,2,0,"div",36),n(),o(18,"div",37),f(19,ht,1,1,"mat-icon",38)(20,vt,1,1,"mat-icon",39),n(),o(21,"div")(22,"button",40),C("click",function(){let i=h(a).$implicit,s=u(4);return v(s.toggleDetails(i.id))}),p(23,"mat-icon",41),n()()(),o(24,"div",17),f(25,Ct,1,4,"ng-container"),n()}if(t&2){let a=l.$implicit,e=u(4);r(3),_(a.thumbnail?3:-1),r(),_(a.thumbnail?-1:4),r(2),I(" ",a.sku," "),r(2),I(" ",a.name," "),r(2),I(" ",ae(11,13,a.price,"USD","symbol","1.2-2")," "),r(4),I(" ",a.stock," "),r(),_(a.stock<20?15:-1),r(),_(a.stock>=20&&a.stock<30?16:-1),r(),_(a.stock>=30?17:-1),r(2),_(a.active?19:-1),r(),_(a.active?-1:20),r(3),c("svgIcon",(e.selectedProduct==null?null:e.selectedProduct.id)===a.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),r(2),_((e.selectedProduct==null?null:e.selectedProduct.id)===a.id?25:-1)}}function bt(t,l){t&1&&P(0,yt,26,18,null,null,B().trackByFn,!0),t&2&&M(l)}function It(t,l){if(t&1&&(o(0,"div",17)(1,"div",18),p(2,"div"),o(3,"div",19),m(4," SKU "),n(),o(5,"div",20),m(6,"Name"),n(),o(7,"div",21),m(8," Price "),n(),o(9,"div",22),m(10," Stock "),n(),o(11,"div",22),m(12," Active "),n(),o(13,"div",23),m(14,"Details"),n()(),f(15,bt,2,0),A(16,"async"),n(),p(17,"mat-paginator",24)),t&2){let a,e=u(2);r(3),c("mat-sort-header","sku"),r(2),c("mat-sort-header","name"),r(2),c("mat-sort-header","price"),r(2),c("mat-sort-header","stock"),r(2),c("mat-sort-header","active"),r(4),_((a=W(16,12,e.products$))?15:-1,a),r(2),c("ngClass",H(14,st,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",re(16,ct))("showFirstLastButtons",!0)}}function wt(t,l){t&1&&(o(0,"div",16),m(1," There are no products! "),n())}function St(t,l){t&1&&f(0,It,18,17)(1,wt,2,0,"div",16),t&2&&_(l.length>0?0:1)}function kt(t,l){if(t&1&&p(0,"img",53),t&2){let a=u(2);c("src",a.selectedProductForm.get("images").value[a.selectedProductForm.get("currentImageIndex").value],Q)}}function Tt(t,l){t&1&&(o(0,"span",54),m(1,"NO IMAGE"),n())}function Et(t,l){if(t&1){let a=T();o(0,"div",55)(1,"button",87),C("click",function(){h(a);let i=u(2);return v(i.cycleImages(!1))}),p(2,"mat-icon",41),n(),o(3,"span",88),m(4),n(),o(5,"button",87),C("click",function(){h(a);let i=u(2);return v(i.cycleImages(!0))}),p(6,"mat-icon",41),n()()}if(t&2){let a=u(2);r(2),c("svgIcon","heroicons_mini:arrow-long-left"),r(2),oe(" ",a.selectedProductForm.get("currentImageIndex").value+1," of ",a.selectedProductForm.get("images").value.length," "),r(2),c("svgIcon","heroicons_mini:arrow-long-right")}}function Ft(t,l){if(t&1&&(o(0,"mat-option",67),m(1),n()),t&2){let a=l.$implicit;c("value",a.id),r(),I(" ",a.name," ")}}function Pt(t,l){if(t&1&&(o(0,"mat-option",67),m(1),n()),t&2){let a=l.$implicit;c("value",a.id),r(),I(" ",a.name," ")}}function Mt(t,l){if(t&1&&(o(0,"mat-option",67),m(1),n()),t&2){let a=l.$implicit;c("value",a.id),r(),I(" ",a.name," ")}}function Lt(t,l){t&1&&p(0,"mat-icon",41),t&2&&c("svgIcon","heroicons_solid:pencil-square")}function Vt(t,l){t&1&&p(0,"mat-icon",41),t&2&&c("svgIcon","heroicons_solid:check")}function Dt(t,l){if(t&1){let a=T();o(0,"mat-checkbox",90),C("change",function(i){let s=h(a).$implicit,d=u(3);return v(d.toggleProductTag(s,i))}),m(1),n()}if(t&2){let a=l.$implicit,e=u(3);c("color","primary")("checked",e.selectedProduct.tags.includes(a.id)),r(),I(" ",a.title," ")}}function $t(t,l){if(t&1&&P(0,Dt,2,3,"mat-checkbox",89,B().trackByFn,!0),t&2){let a=u(2);M(a.filteredTags)}}function Bt(t,l){if(t&1){let a=T();o(0,"mat-form-field",91)(1,"input",92),C("input",function(i){let s=h(a).$implicit,d=u(3);return v(d.updateTagTitle(s,i))}),n(),o(2,"button",93),C("click",function(){let i=h(a).$implicit,s=u(3);return v(s.Tag(i))}),p(3,"mat-icon",41),n()()}if(t&2){let a=l.$implicit;c("subscriptSizing","dynamic"),r(),c("value",a.title),r(2),c("svgIcon","heroicons_solid:trash")}}function Nt(t,l){if(t&1&&(o(0,"div",81),P(1,Bt,4,3,"mat-form-field",91,B().trackByFn,!0),n()),t&2){let a=u(2);r(),M(a.filteredTags)}}function Rt(t,l){if(t&1){let a=T();o(0,"div",94),C("click",function(){h(a),u();let i=D(97);return u().createTag(i.value),v(i.value="")}),p(1,"mat-icon",95),o(2,"div",96),m(3,' Create "'),o(4,"b"),m(5),n(),m(6,'" '),n()()}if(t&2){u();let a=D(97);r(),c("svgIcon","heroicons_solid:plus-circle"),r(4),ne(a.value)}}function At(t,l){t&1&&(p(0,"mat-icon",97),o(1,"span",98),m(2,"Product updated"),n()),t&2&&c("svgIcon","heroicons_outline:check")}function Ot(t,l){t&1&&(p(0,"mat-icon",99),o(1,"span",98),m(2,"An error occurred, try again!"),n()),t&2&&c("svgIcon","heroicons_outline:x-mark")}function zt(t,l){if(t&1&&(o(0,"div",85),f(1,At,3,1)(2,Ot,3,1),n()),t&2){let a=u(2);r(),_(a.flashMessage==="success"?1:-1),r(),_(a.flashMessage==="error"?2:-1)}}function jt(t,l){if(t&1){let a=T();o(0,"div",46)(1,"div",47)(2,"form",48)(3,"div",49)(4,"div",50)(5,"div",51)(6,"div",52),f(7,kt,1,1,"img",53)(8,Tt,2,0,"span",54),n(),f(9,Et,7,4,"div",55),n(),o(10,"div",56)(11,"span",57),m(12,"Product status"),n(),o(13,"mat-slide-toggle",58),m(14),n()()(),o(15,"div",59)(16,"div",60)(17,"mat-form-field",61)(18,"mat-label"),m(19,"Name"),n(),p(20,"input",62),n(),o(21,"div",63)(22,"mat-form-field",64)(23,"mat-label"),m(24,"SKU"),n(),p(25,"input",62),n(),o(26,"mat-form-field",65)(27,"mat-label"),m(28,"Barcode"),n(),p(29,"input",62),n()(),o(30,"div",63)(31,"mat-form-field",64)(32,"mat-label"),m(33,"Category"),n(),o(34,"mat-select",66),P(35,Ft,2,2,"mat-option",67,N),n()(),o(37,"mat-form-field",68)(38,"mat-label"),m(39,"Brand"),n(),o(40,"mat-select",66),P(41,Pt,2,2,"mat-option",67,N),n()(),o(43,"mat-form-field",69)(44,"mat-label"),m(45,"Vendor"),n(),o(46,"mat-select",66),P(47,Mt,2,2,"mat-option",67,N),n()()(),o(49,"div",63)(50,"mat-form-field",64)(51,"mat-label"),m(52,"Stock"),n(),p(53,"input",70),n(),o(54,"mat-form-field",69)(55,"mat-label"),m(56,"Reserved"),n(),p(57,"input",70),n()()(),o(58,"div",71)(59,"mat-form-field",61)(60,"mat-label"),m(61,"Cost"),n(),o(62,"span",72),m(63,"$"),n(),p(64,"input",62),n(),o(65,"mat-form-field",61)(66,"mat-label"),m(67,"Base Price"),n(),o(68,"span",72),m(69,"$"),n(),p(70,"input",62),n(),o(71,"mat-form-field",61)(72,"mat-label"),m(73,"Tax"),n(),o(74,"span",73),m(75,"%"),n(),p(76,"input",70),n(),o(77,"mat-form-field",61)(78,"mat-label"),m(79,"Price"),n(),o(80,"span",73),m(81,"$"),n(),p(82,"input",62),n()(),o(83,"div",71)(84,"mat-form-field",61)(85,"mat-label"),m(86,"Weight"),n(),o(87,"span",73),m(88,"lbs."),n(),p(89,"input",62),n(),o(90,"span",74),m(91,"Tags"),n(),o(92,"div",75)(93,"div",76)(94,"div",77),p(95,"mat-icon",41),o(96,"input",78,1),C("input",function(i){h(a);let s=u();return v(s.filterTags(i))})("keydown",function(i){h(a);let s=u();return v(s.filterTagsInputKeyDown(i))}),n()(),o(98,"button",79),C("click",function(){h(a);let i=u();return v(i.toggleTagsEditMode())}),f(99,Lt,1,1,"mat-icon",41)(100,Vt,1,1,"mat-icon",41),n()(),o(101,"div",80),f(102,$t,2,0)(103,Nt,3,0,"div",81)(104,Rt,7,2,"div",82),n()()()()(),o(105,"div",83)(106,"button",84),C("click",function(){h(a);let i=u();return v(i.deleteSelectedProduct())}),m(107," Delete "),n(),o(108,"div",26),f(109,zt,3,2,"div",85),o(110,"button",86),C("click",function(){h(a);let i=u();return v(i.updateSelectedProduct())}),m(111," Update "),n()()()()()()}if(t&2){let a=D(97),e=u();r(2),c("formGroup",e.selectedProductForm),r(5),_(e.selectedProductForm.get("images").value.length?7:8),r(2),_(e.selectedProductForm.get("images").value.length?9:-1),r(4),c("formControlName","active")("color","primary"),r(),I(" ",e.selectedProductForm.get("active").value===!0?"Active":"Disabled"," "),r(6),c("formControlName","name"),r(5),c("formControlName","sku"),r(4),c("formControlName","barcode"),r(5),c("formControlName","category"),r(),M(e.categories),r(5),c("formControlName","brand"),r(),M(e.brands),r(5),c("formControlName","vendor"),r(),M(e.vendors),r(6),c("formControlName","stock"),r(4),c("formControlName","reserved"),r(7),c("formControlName","cost"),r(6),c("formControlName","basePrice"),r(6),c("formControlName","taxPercent"),r(6),c("formControlName","price"),r(7),c("formControlName","weight"),r(6),c("svgIcon","heroicons_solid:magnifying-glass"),r(),c("maxLength",50),r(3),_(e.tagsEditMode?-1:99),r(),_(e.tagsEditMode?100:-1),r(2),_(e.tagsEditMode?-1:102),r(),_(e.tagsEditMode?103:-1),r(),_(e.shouldShowCreateTagButton(a.value)?104:-1),r(2),c("color","warn"),r(3),_(e.flashMessage?109:-1),r(),c("color","primary")}}var rt=(()=>{let l=class l{constructor(e,i,s,d){this._changeDetectorRef=e,this._fuseConfirmationService=i,this._formBuilder=s,this._inventoryService=d,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new Ne,this.selectedProduct=null,this.tagsEditMode=!1,this._unsubscribeAll=new J}ngOnInit(){this.selectedProductForm=this._formBuilder.group({id:[""],category:[""],name:["",[De.required]],description:[""],tags:[[]],sku:[""],barcode:[""],brand:[""],vendor:[""],stock:[""],reserved:[""],cost:[""],basePrice:[""],taxPercent:[""],price:[""],weight:[""],thumbnail:[""],images:[[]],currentImageIndex:[0],active:[!1]}),this._inventoryService.brands$.pipe(k(this._unsubscribeAll)).subscribe(e=>{this.brands=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.categories$.pipe(k(this._unsubscribeAll)).subscribe(e=>{this.categories=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.pagination$.pipe(k(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.products$=this._inventoryService.products$,this._inventoryService.tags$.pipe(k(this._unsubscribeAll)).subscribe(e=>{this.tags=e,this.filteredTags=e,this._changeDetectorRef.markForCheck()}),this._inventoryService.vendors$.pipe(k(this._unsubscribeAll)).subscribe(e=>{this.vendors=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe(k(this._unsubscribeAll),U(300),x(e=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(0,10,"name","asc",e))),y(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe(k(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),Z(this._sort.sortChange,this._paginator.page).pipe(x(()=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),y(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(e){if(this.selectedProduct&&this.selectedProduct.id===e){this.closeDetails();return}this._inventoryService.getProductById(e).subscribe(i=>{this.selectedProduct=i,this.selectedProductForm.patchValue(i),this._changeDetectorRef.markForCheck()})}closeDetails(){this.selectedProduct=null}cycleImages(e=!0){let i=this.selectedProductForm.get("images").value.length,s=this.selectedProductForm.get("currentImageIndex").value,d=s+1===i?0:s+1,g=s-1<0?i-1:s-1;e?this.selectedProductForm.get("currentImageIndex").setValue(d):this.selectedProductForm.get("currentImageIndex").setValue(g)}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(e){let i=e.target.value.toLowerCase();this.filteredTags=this.tags.filter(s=>s.title.toLowerCase().includes(i))}filterTagsInputKeyDown(e){if(e.key!=="Enter")return;if(this.filteredTags.length===0){this.createTag(e.target.value),e.target.value="";return}let i=this.filteredTags[0];this.selectedProduct.tags.find(d=>d===i.id)?this.removeTagFromProduct(i):this.addTagToProduct(i)}createTag(e){let i={title:e};this._inventoryService.createTag(i).subscribe(s=>{this.addTagToProduct(s)})}updateTagTitle(e,i){e.title=i.target.value,this._inventoryService.updateTag(e.id,e).pipe(U(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(e){this._inventoryService.deleteTag(e.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(e){this.selectedProduct.tags.unshift(e.id),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(e){this.selectedProduct.tags.splice(this.selectedProduct.tags.findIndex(i=>i===e.id),1),this.selectedProductForm.get("tags").patchValue(this.selectedProduct.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(e,i){i.checked?this.addTagToProduct(e):this.removeTagFromProduct(e)}shouldShowCreateTagButton(e){return!(e===""||this.tags.findIndex(i=>i.title.toLowerCase()===e.toLowerCase())>-1)}createProduct(){this._inventoryService.createProduct().subscribe(e=>{this.selectedProduct=e,this.selectedProductForm.patchValue(e),this._changeDetectorRef.markForCheck()})}updateSelectedProduct(){let e=this.selectedProductForm.getRawValue();delete e.currentImageIndex,this._inventoryService.updateProduct(e.id,e).subscribe(()=>{this.showFlashMessage("success")})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Delete product",message:"Are you sure you want to remove this product? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if(i==="confirmed"){let s=this.selectedProductForm.getRawValue();this._inventoryService.deleteProduct(s.id).subscribe(()=>{this.closeDetails()})}})}showFlashMessage(e){this.flashMessage=e,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(e,i){return i.id||e}};l.\u0275fac=function(i){return new(i||l)(V(se),V(Fe),V(Ue),V(E))},l.\u0275cmp=$({type:l,selectors:[["inventory-list"]],viewQuery:function(i,s){if(i&1&&(G(z,5),G(O,5)),i&2){let d;q(d=K())&&(s._paginator=d.first),q(d=K())&&(s._sort=d.first)}},standalone:!0,features:[R],decls:19,vars:11,consts:[["rowDetailsTemplate",""],["newTagInput",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"absolute","inset-x-0","bottom-0"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"mode"],[1,"border-t","p-8","text-center","text-4xl","font-semibold","tracking-tight","sm:p-16"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","text-secondary","sticky","top-0","z-10","grid","gap-4","bg-gray-50","px-6","py-4","text-md","font-semibold","shadow","dark:bg-black","dark:bg-opacity-5","md:px-8"],[1,"hidden","md:block",3,"mat-sort-header"],[3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"z-10","border-b","bg-gray-50","dark:bg-transparent","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-b-0","sm:border-t",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"inventory-grid","grid","items-center","gap-4","border-b","px-6","py-3","md:px-8"],[1,"flex","items-center"],[1,"relative","mr-6","flex","h-12","w-12","flex-0","items-center","justify-center","overflow-hidden","rounded","border"],[1,"w-8",3,"alt","src"],[1,"flex","h-full","w-full","items-center","justify-center","text-center","text-xs","font-semibold","uppercase","leading-none"],[1,"hidden","truncate","md:block"],[1,"truncate"],[1,"hidden","items-center","lg:flex"],[1,"min-w-4"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-red-200"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-orange-200"],[1,"ml-2","flex","h-4","w-1","items-end","overflow-hidden","rounded","bg-green-100"],[1,"hidden","lg:block"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"h-7","min-h-7","min-w-10","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","h-1/3","w-full","bg-red-600"],[1,"flex","h-2/4","w-full","bg-orange-400"],[1,"flex","h-full","w-full","bg-green-400"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"overflow-hidden","shadow-lg"],[1,"flex","border-b"],[1,"flex","w-full","flex-col",3,"formGroup"],[1,"flex","flex-col","p-8","sm:flex-row"],[1,"mb-8","flex","flex-col","items-center","sm:mb-0","sm:items-start"],[1,"flex","flex-col","items-center"],[1,"h-44","w-32","overflow-hidden","rounded","border"],[1,"h-full","w-full","object-cover",3,"src"],[1,"flex","min-h-20","items-center","text-lg","font-semibold"],[1,"mt-2","flex","items-center","whitespace-nowrap"],[1,"mt-8","flex","flex-col"],[1,"mb-2","font-semibold"],[3,"formControlName","color"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","w-full","flex-col","sm:pl-8","lg:w-2/4"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex"],[1,"w-1/3","pr-2"],[1,"w-2/3","pl-2"],[3,"formControlName"],[3,"value"],[1,"w-1/3","px-2"],[1,"w-1/3","pl-2"],["type","number","matInput","",3,"formControlName"],[1,"flex","w-full","flex-col","sm:pl-8","lg:w-1/4"],["matPrefix",""],["matSuffix",""],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","overflow-hidden","rounded-md","border","border-gray-300","shadow-sm","dark:border-gray-500"],[1,"-my-px","flex","items-center","px-3","py-2"],[1,"flex","min-w-0","flex-auto","items-center"],["type","text","placeholder","Enter tag name",1,"ml-2","min-w-0","border-0","py-1",3,"input","keydown","maxLength"],["mat-icon-button","",1,"ml-3","h-8","min-h-8","w-8",3,"click"],[1,"h-44","overflow-y-auto","border-t","border-gray-300","leading-none","dark:border-gray-500"],[1,"space-y-2","p-4"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","border-t","pl-4","pr-3","leading-none","dark:hover:bg-hover","hover:bg-gray-50"],[1,"flex","w-full","items-center","justify-between","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"click","color"],[1,"mr-4","flex","items-center"],["mat-flat-button","",3,"click","color"],["mat-icon-button","",3,"click"],[1,"font-sm","mx-2"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"color","checked"],[1,"flex","h-10","min-h-10","items-center","pl-1","pr-4",3,"change","color","checked"],[1,"fuse-mat-dense","w-full",3,"subscriptSizing"],["matInput","",3,"input","value"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"-ml-0.5","flex","h-10","min-h-10","cursor-pointer","items-center","border-t","pl-4","pr-3","leading-none","dark:hover:bg-hover","hover:bg-gray-50",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"]],template:function(i,s){if(i&1){let d=T();o(0,"div",2)(1,"div",3),f(2,dt,2,1,"div",4),o(3,"div",5),m(4,"Inventory"),n(),o(5,"div",6)(6,"mat-form-field",7),p(7,"mat-icon",8)(8,"input",9),n(),o(9,"button",10),C("click",function(){return h(d),v(s.createProduct())}),p(10,"mat-icon",11),o(11,"span",12),m(12,"Add"),n()()()(),o(13,"div",13)(14,"div",14),f(15,St,2,1),A(16,"async"),f(17,jt,112,29,"ng-template",null,0,le),n()()()}if(i&2){let d;r(2),_(s.isLoading?2:-1),r(4),c("subscriptSizing","dynamic"),r(),c("svgIcon","heroicons_solid:magnifying-glass"),r(),c("formControl",s.searchInputControl)("autocomplete","off")("placeholder","Search products"),r(),c("color","primary"),r(),c("svgIcon","heroicons_outline:plus"),r(5),_((d=W(16,9,s.products$))?15:-1,d)}},dependencies:[Me,Pe,Ie,be,xe,Ce,ye,Ee,Te,Ke,qe,Qe,Re,Ve,Ae,$e,Be,Ge,Oe,ze,je,ke,we,Se,Ze,O,Ye,me,it,z,ce,We,He,tt,et,he,ve,Xe,Je,fe,ge,de,pe],styles:[`.inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px}}
`],encapsulation:2,data:{animation:Le},changeDetection:0});let t=l;return t})();var ki=[{path:"",pathMatch:"full",redirectTo:"inventory"},{path:"inventory",component:ot,children:[{path:"",component:rt,resolve:{brands:()=>L(E).getBrands(),categories:()=>L(E).getCategories(),products:()=>L(E).getProducts(),tags:()=>L(E).getTags(),vendors:()=>L(E).getVendors()}}]}];export{ki as default};
